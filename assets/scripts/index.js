!function(e){function t(t){for(var n,i,c=t[0],u=t[1],l=t[2],f=0,m=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(s&&s(t);m.length;)m.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=u;o.push([396,1]),r()}({354:function(e,t,r){var n=r(25),a=r(355);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},355:function(e,t,r){},373:function(e,t,r){var n=r(25),a=r(374);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},374:function(e,t,r){},376:function(e,t,r){var n=r(25),a=r(377);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},377:function(e,t,r){},378:function(e,t,r){var n=r(25),a=r(379);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},379:function(e,t,r){},380:function(e,t,r){var n=r(25),a=r(381);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},381:function(e,t,r){},382:function(e,t,r){var n=r(25),a=r(383);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},383:function(e,t,r){},384:function(e,t,r){var n=r(25),a=r(385);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},385:function(e,t,r){},386:function(e,t,r){var n=r(25),a=r(387);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},387:function(e,t,r){},388:function(e,t,r){var n=r(25),a=r(389);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},389:function(e,t,r){},390:function(e,t,r){var n=r(25),a=r(391);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},391:function(e,t,r){},392:function(e,t,r){var n=r(25),a=r(393);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},393:function(e,t,r){},394:function(e,t,r){var n=r(25),a=r(395);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},395:function(e,t,r){},396:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(75),i=r.n(o),c=r(8),u=r(15),l=(r(166),r(35)),s=r(154),f=r(109),m=r(155),d=r(156),p=r.n(d),y=function(e){return"dollar"===e?String.fromCharCode(36):String.fromCharCode(8364)},b=function(e,t,r){return"dollar"===t?e:+(e*r).toFixed(2)};function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={orderSum:0,exchangeRate:"dollar",exchangeRateCoefficient:"",sign:y("dollar"),order:{pizzas:[]},address:"",phoneNumber:"",userId:"",isAuthorized:!1,deliveryCost:"",displayedDeliveryCost:"",orderWasSent:!1},S=r(157),A=r(10),j=(r(354),function(e){return a.a.createElement("div",{className:"cart-icon"},a.a.createElement("div",{className:"cart-icon__image-block"},a.a.createElement("img",{className:"cart-icon__image",src:"https://i.ibb.co/ZfJ03Ns/shop1.png"})),a.a.createElement("div",{className:"cart-icon__counter-block"},a.a.createElement("span",{className:"cart-icon__counter"},e.counter)))}),w=r(28),N=r.n(w);function k(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){k(o,n,a,i,c,"next",e)}function c(e){k(o,n,a,i,c,"throw",e)}i(void 0)}))}}var I=function(e){return{type:"ADD_PIZZA_TO_CART",payload:e}},z=function(e){return{type:"CHANGE_PIZZA_QUANTITY",payload:e}},x=function(e){return{type:"REMOVE_PIZZA_FROM_CART",payload:e}},R=function(e){return{type:"HAS_AUTHORISED",payload:e}};r(373);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.state.order.pizzas,r=e.state.exchangeRate,o=e.state.isAuthorized,i=T(Object(n.useState)(""),2),c=i[0],l=i[1],s=T(Object(n.useState)(""),2),f=s[0],m=s[1],d=T(Object(n.useState)({message:"",imageLink:""}),2),p=d[0],y=d[1],b=T(Object(n.useState)(""),2),v=(b[0],b[1],T(Object(n.useState)(""),2));v[0],v[1];Object(n.useEffect)((function(){l(h())}),[r]),Object(n.useEffect)((function(){m(t.reduce((function(e,t){return e+t.counter}),0))}),[t]),Object(n.useEffect)((function(){y(o?{message:"You are authorized ",imageLink:"https://drive.google.com/uc?export=view&id=1KUFWJOSaU8K1YvnvkKTD2lrYDv3b5LPq"}:{message:"",imageLink:""})}),[o]);var h=function(){var t;switch(e.state.exchangeRate){case"dollar":t="1Uol01luejIPhLtlJ30bZFMwfKfxDtskQ";break;case"euro":t="1unCXIPsk41IfaBidpd77u21SbsdfeBPj"}return t},g=e.dispatch;return a.a.createElement("nav",{className:"header"},a.a.createElement("div",{className:"header__body"},a.a.createElement("div",{className:"header__logo logo"},a.a.createElement("img",{className:"logo__image",src:"https://drive.google.com/uc?export=view&id=1XUK4cd0QXMIvUOVGk9a4BrGvJPRQnwEL"}),a.a.createElement("aside",{className:"logo__extra authorised-status"},a.a.createElement("label",{className:"authorised-status__test"},p.message),a.a.createElement("img",{src:p.imageLink,className:"authorised-status__image"}))),a.a.createElement("ul",{className:"header__menu"},a.a.createElement("li",{className:"header__menu__link"},a.a.createElement(u.b,{to:"/menu"},"Menu")),o&&a.a.createElement("li",{className:"header__menu__link"},a.a.createElement(u.b,{to:"/orders"},"Orders")),o&&a.a.createElement("li",{className:"header__menu__link",onClick:function(){g({type:"LOG_OUT"})}},a.a.createElement(u.b,{to:"/"},"Log out")),!o&&a.a.createElement("li",{className:"header__menu__link"},a.a.createElement(u.b,{to:"/checkout"},"Checkout")),a.a.createElement("li",{className:"header__menu__link"},a.a.createElement("img",{id:"exchange-rate",src:"https://drive.google.com/uc?export=view&id=".concat(c),onClick:function(){g(function(e){return{type:"CHANGE_EXCHANGE_RATE",payload:e}}("dollar"===r?"euro":"dollar"))}})),a.a.createElement("li",{className:"header__menu__link"},a.a.createElement(u.b,{to:"/cart"},a.a.createElement(j,{counter:f}))))))})),L=(r(376),r(378),function(e){var t=e.counter,r=(e.index,e.changePizzaCounter);return t>0?a.a.createElement("div",{className:"counter"},a.a.createElement("ul",{className:"counter__body"},a.a.createElement("li",{className:"counter__button button",onClick:function(){return r(t-1)}},"−"),a.a.createElement("li",null,a.a.createElement("span",{className:"counter__quantity"},t)),a.a.createElement("li",{className:"counter__button button",onClick:function(){return r(t+1)}},"+"))):a.a.createElement("button",{className:"button send",onClick:function(){return r(t+1)}},"Add to cart +")});function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.pizza,r=t.title,o=t.image,i=t.price,c=t.ingredients,u=e.state.sign,l=e.state.exchangeRate,s=e.state.exchangeRateCoefficient,f=D(Object(n.useState)(),2),m=f[0],d=f[1],p=D(Object(n.useState)(),2),y=p[0],v=p[1];Object(n.useEffect)((function(){v(b(i,l,s))}),[l,s]),Object(n.useEffect)((function(){var t;d((t=e.state.order.pizzas.find((function(e){return e.title===r})))?t.counter:0)}),[]);var h=e.dispatch;return a.a.createElement("li",{className:"pizza-item"},a.a.createElement("div",{className:"pizza-item__body"},a.a.createElement("img",{src:"https://drive.google.com/uc?export=view&id=".concat(o),className:"pizza-item__image"}),a.a.createElement("h3",{className:"pizza-item__title"},r),a.a.createElement("aside",{className:"pizza-item__ingredients"},c.toString()),a.a.createElement("aside",{className:"pizza-item__price"},y," ",u),a.a.createElement("div",{className:"pizza-item__button"},a.a.createElement(L,{counter:m,changePizzaCounter:function(e){d(e),h(m>0&&e>0?z({title:r,value:e}):e<1?x(r):I({title:r,price:i,image:o,counter:e}))}}))))}));r(380);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(){Object(n.useEffect)((function(){o()}),[]);var e=G(Object(n.useState)([]),2),t=e[0],r=e[1],o=function(){N.a.get("https://liptonv.pythonanywhere.com/get_pizza").then((function(e){return e.data})).then((function(e){var t=e.pizzas.filter((function(e){return e}));r(t)}))};return a.a.createElement("section",{className:"menu"},a.a.createElement("ul",{className:"menu__list"},t.map((function(e){return a.a.createElement(F,{key:e.title,pizza:e})}))))},Z=function(e){var t=e.foodItem,r=t.title,n=t.image,o=t.displayedPrice,i=t.counter,c=e.sign;return a.a.createElement("li",{className:"pizza-cart-item"},a.a.createElement("div",{className:"pizza-cart-item-content"},a.a.createElement("div",null,a.a.createElement("img",{src:"https://drive.google.com/uc?export=view&id=".concat(n)}),a.a.createElement("h3",null,r)),a.a.createElement("div",null,a.a.createElement("p",null,i," x ",o," ",c))))};function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e){var t=e.order,r=t.address,o=t.phoneNumber,i=t.totalPrice,c=t.exchangeRate,u=t.date;Object(n.useEffect)((function(){f(y(c))}),[c]);var l=W(Object(n.useState)(""),2),s=l[0],f=l[1];return a.a.createElement("li",{className:"order"},a.a.createElement("div",null,a.a.createElement("ul",{className:"order__body"},a.a.createElement("li",null,"Phone number: ",o),a.a.createElement("li",null,"Address: ",r),a.a.createElement("li",null,"Date: ",u)),a.a.createElement("ul",null,e.order.orders.map((function(e){return a.a.createElement(Z,{key:e.title,foodItem:e,sign:s})}))),a.a.createElement("div",{className:"order__cost"},"Total cost includes delivery: ",i," ",s)))};r(382);function J(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=q(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function K(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.state.userId;Object(n.useEffect)((function(){c()}),[]);var r=X(Object(n.useState)(!1),2),o=r[0],i=r[1],c=function(){N.a.post("https://liptonv.pythonanywhere.com/get_orders_by_user_id",{userId:t}).then((function(e){return e.data})).then((function(e){if(e){var t,r=K(e.data),n=J(r);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,c=JSON.parse(o.orders).pizzas,u=[],l=J(c);try{for(l.s();!(a=l.n()).done;){var s=a.value;u.push(s)}}catch(e){l.e(e)}finally{l.f()}o.orders=u}}catch(e){n.e(e)}finally{n.f()}i(r)}}))};return o.length?a.a.createElement("section",{className:"orders"},a.a.createElement("ul",{className:"orders__list"},o.map((function(e,t){return a.a.createElement(V,{key:t,order:e})})))):a.a.createElement("section",{className:"empty-block"},a.a.createElement("h1",{className:"empty-block__message"},"You don't have any orders yet"))})),ee=Object(c.b)((function(e){return{state:e}}),null)((function(e){return e.state.isAuthorized?a.a.createElement(A.b,{path:"/orders",component:Q}):a.a.createElement(A.a,{to:"/checkout"})}));r(384);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.pizza,r=t.title,o=t.image,i=t.price,c=t.displayedPrice,u=e.state.sign,l=te(Object(n.useState)(0),2),s=l[0],f=l[1];Object(n.useEffect)((function(){var t;f((t=e.state.order.pizzas.find((function(e){return e.title===r})))?t.counter:0)}),[]);var m=e.dispatch;return a.a.createElement("li",{className:"pizza-cart-item"},a.a.createElement("div",{className:"pizza-cart-item-content"},a.a.createElement("div",null,a.a.createElement("img",{src:"https://drive.google.com/uc?export=view&id=".concat(o)}),a.a.createElement("h3",null,r)),a.a.createElement("div",null,a.a.createElement("p",null,(c*s).toFixed(2)," ",u),a.a.createElement(L,{counter:s,changePizzaCounter:function(e){f(e),m(s>0&&e>0?z({title:r,value:e}):e<1?x(r):I({title:r,price:i,image:o,counter:e}))}}))))}));r(386);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(e){var t=e.deliveryCost,r=e.orderCost,o=e.sign,i=ae(Object(n.useState)(""),2),c=i[0],u=i[1];return Object(n.useEffect)((function(){u(+(Number(r)+Number(t)).toFixed(2))}),[t,r]),a.a.createElement("section",{className:"order-info"},a.a.createElement("ul",{className:"order-info__body"},a.a.createElement("li",{className:"order-info__item"},"Cost of delivery: ",t," ",o),a.a.createElement("li",{className:"order-info__item"},"Total: ",c," ",o)))},ce=(r(388),Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.state.order.pizzas,r=e.state.sign,o=e.state.displayedDeliveryCost,i=e.state.orderSum,c=Object(n.useRef)(null),l=Object(A.g)();Object(n.useEffect)((function(){if(t.length>0){var e=function(e){13===e.keyCode&&(console.log("нажат энтер"),l.push("/contact-details"))};return document.addEventListener("keydown",e),c.current.focus(),function(){document.removeEventListener("keydown",e)}}}),[t.length]);var s=e.dispatch;return t.length>0?a.a.createElement("section",{className:"cart"},a.a.createElement("button",{className:"cart__clear-button",onClick:function(){s({type:"CLEAR_CART"})}},"Clear cart"),a.a.createElement("ul",{className:"cart__products"},e.state.order.pizzas.map((function(e){return a.a.createElement(ne,{key:e.title,pizza:e})}))),a.a.createElement("div",{className:"cart__order-info"},a.a.createElement(ie,{sign:r,deliveryCost:o,orderCost:i})),a.a.createElement(u.b,{to:"/contact-details"},a.a.createElement("button",{className:"cart__order button send",ref:c},"Order"))):a.a.createElement("section",{className:"empty-block"},a.a.createElement("h1",{className:"empty-block__message"},"Your cart is empty. Add some delicious food!"))}))),ue=function(e){var t=e.title,r=e.name,n=e.value,o=e.changeInputValue;return a.a.createElement("div",{id:r},a.a.createElement("label",null,t),a.a.createElement("input",{name:r,value:n,onChange:function(){return o(event)}}))},le=(r(390),function(e){var t=e.closePopUp,r=e.show,o=e.message,i=e.imageLink;return Object(n.useEffect)((function(){var e=function(e){27===e.keyCode&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),a.a.createElement("div",{className:"pop-up-bgr pop-up-bgr_".concat(r)},a.a.createElement("button",{onClick:function(){return t()},className:"pop-up-bgr__close-button close-button"},"✖"),a.a.createElement("div",{className:"pop-up-bgr__modal-window modal-window"},a.a.createElement("div",{className:"modal-window__content"},a.a.createElement("label",null,o),a.a.createElement("img",{src:"https://drive.google.com/uc?export=view&id=".concat(i),className:"modal-window__image"}))))});function se(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pe=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.state.phoneNumber,r=e.state.address,o=e.state.sign,i=e.state.displayedDeliveryCost,c=e.state.orderSum,u=e.state.userId,l=e.state.exchangeRate,s=e.state.order,f=e.state.orderWasSent,m=fe(Object(n.useState)([{name:"phoneNumber",value:t,title:"Phone Number"},{name:"address",value:r,title:"Address"}]),2),d=m[0],p=m[1],y=fe(Object(n.useState)("contact-details-form"),2),b=y[0],v=y[1],h=fe(Object(n.useState)(""),2),g=h[0],E=h[1],_=fe(Object(n.useState)(""),2),O=_[0],S=_[1];Object(n.useEffect)((function(){p([{name:"phoneNumber",value:t,title:"Phone Number"},{name:"address",value:r,title:"Address"}])}),[r,t]),Object(n.useEffect)((function(){f&&(v("pop-up"),E("Your order is accepted!"),S("1KUFWJOSaU8K1YvnvkKTD2lrYDv3b5LPq"))}),[f]),Object(n.useEffect)((function(){var e=function(e){13===e.keyCode&&j()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var A=function(e){var t=e.target,r=t.name,n=t.value,a=se(d);a.map((function(e){return e.name===r&&(e.value=n),e})),p(a),w({type:"CHANGE_INPUT_VALUE",payload:{name:r,value:n}})},j=function(){var e=(new Date).toLocaleString(),n={address:r,userId:u,orderSum:c+i,exchangeRate:l,date:e,order:JSON.stringify(s),phoneNumber:t};r&&t&&c&&w(function(e){return function(){var t=C(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("https://liptonv.pythonanywhere.com/insert_order",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});case 3:n=t.sent,a=n.data,r({type:"INSERT_ORDER",payload:a}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(n))},w=e.dispatch;return a.a.createElement("section",{className:"order-details"},"contact-details-form"===b&&a.a.createElement(n.Fragment,null,a.a.createElement("h1",{className:"order-details__title"},"Contact details"),a.a.createElement("form",{className:"order-details__form"},d.map((function(e){return a.a.createElement(ue,{key:e.name,title:e.title,name:e.name,value:e.value,changeInputValue:A})}))),a.a.createElement("div",{className:"order-details__order-info"},a.a.createElement(ie,{sign:o,deliveryCost:i,orderCost:c,getMessageAndImageLink:function(e,t){E(e),S(t),v("pop-up")}})),a.a.createElement("button",{className:"order-details__order-button button send",onClick:j},"Order")),"pop-up"===b&&a.a.createElement(le,{message:g,imageLink:O,closePopUp:function(){w({type:"READY_FOR_NEW_ORDER"}),v("contact-details-form"),E(""),S("")}}))}));function ye(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ge=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.getMessageAndImageLink,r=be(Object(n.useState)([{name:"login",value:"",title:"Login"},{name:"password",value:"",title:"Password"}]),2),o=r[0],i=r[1];Object(n.useEffect)((function(){var e=function(e){13===e.keyCode&&u()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var c=function(e){var t=e.target,r=t.name,n=t.value,a=ye(o);a.map((function(e){return e.name===r&&(e.value=n),e})),i(a)},u=function(){var e=ye(o),r={};e.every((function(e){return r[e.name]=e.value,e.value}))&&N.a.post("https://liptonv.pythonanywhere.com/register_user",r).then((function(e){return e.data})).then((function(e){e.inserted_id?l(R(e.inserted_id)):t("Sign up failed. Change login","15NOFC7wqYc4kb7D2RzYbGWbkn466-Gr1")}))},l=e.dispatch;return a.a.createElement("section",{className:"form"},a.a.createElement("h1",{className:"form__title"},"Sign up"),a.a.createElement("form",{className:"form__body"},o.map((function(e){return a.a.createElement(ue,{key:"sign-up-".concat(e.name),title:e.title,name:e.name,value:e.value,changeInputValue:c})}))),a.a.createElement("button",{className:"form__button button send",onClick:u},"Send"))}));function Ee(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=Object(c.b)((function(e){return{state:e}}),null)((function(e){var t=e.getMessageAndImageLink,r=_e(Object(n.useState)([{name:"login",value:"",title:"Login"},{name:"password",value:"",title:"Password"}]),2),o=r[0],i=r[1];Object(n.useEffect)((function(){var e=function(e){13===e.keyCode&&u()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var c=function(e){var t=e.target,r=t.name,n=t.value,a=Ee(o);a.map((function(e){return e.name===r&&(e.value=n),e})),i(a)},u=function(){var e=Ee(o),r={};e.every((function(e){return r[e.name]=e.value,e.value}))&&N.a.post("https://liptonv.pythonanywhere.com/login_user",r).then((function(e){return e.data})).then((function(e){e.id&&l(R(e.id))})).catch((function(){t("Authorized failed. Wrong login or password","15NOFC7wqYc4kb7D2RzYbGWbkn466-Gr1")}))},l=e.dispatch;return a.a.createElement("section",{className:"form"},a.a.createElement("h1",{className:"form__title"},"Log in"),a.a.createElement("form",{className:"form__body"},o.map((function(e){return a.a.createElement(ue,{key:"log-in-".concat(e.name),title:e.title,name:e.name,value:e.value,changeInputValue:c})}))),a.a.createElement("button",{className:"form__button button send",onClick:u},"Send"))}));r(392);function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne=function(){var e=je(Object(n.useState)("log-in-form"),2),t=e[0],r=e[1],o=je(Object(n.useState)(""),2),i=o[0],c=o[1],u=je(Object(n.useState)(""),2),l=u[0],s=u[1],f=function(e){r(e.target.getAttribute("data-name"))},m=function(e,t){r("pop-up"),c(e),s(t)};return a.a.createElement("section",{className:"checkout"},a.a.createElement("ul",{className:"checkout__menu"},a.a.createElement("li",{onClick:f,className:"checkout__link","data-name":"log-in-form"},"Log in"),a.a.createElement("li",{onClick:f,className:"checkout__link","data-name":"sign-up-form"},"Sign up")),a.a.createElement("div",{className:"checkout__form"},"log-in-form"===t&&a.a.createElement(Ae,{getMessageAndImageLink:m}),"sign-up-form"===t&&a.a.createElement(ge,{getMessageAndImageLink:m})),"pop-up"===t&&a.a.createElement(le,{message:i,imageLink:l,closePopUp:function(){r("log-in-form"),c(""),s("")}})," }")},ke=Object(c.b)((function(e){return{state:e}}),null)((function(e){return e.state.isAuthorized?a.a.createElement(A.a,{to:"/"}):a.a.createElement(A.b,{path:"/checkout",component:Ne})})),Ce=function(){return a.a.createElement("section",{id:"page-not-found"},a.a.createElement("h1",{className:"empty"},"Page not found"),a.a.createElement(u.b,{to:"/",className:"back-to-menu"},"Back to menu"))},Ie=(r(394),function(){var e=Object(c.c)();return Object(n.useEffect)((function(){e(function(){var e=C(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://liptonv.pythonanywhere.com/dollar_to_euro");case 2:r=e.sent,n=r.data,t({type:"FETCH_EXCHANGE_RATE_COEFFICIENT_AND_DELIVERY",payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),a.a.createElement("main",null,a.a.createElement(M,null),a.a.createElement(A.d,null,a.a.createElement(A.b,{path:"/",exact:!0,render:function(){return a.a.createElement(A.a,{to:"/menu"})}}),a.a.createElement(A.b,{path:"/menu",component:H}),a.a.createElement(A.b,{path:"/orders",component:ee}),a.a.createElement(A.b,{path:"/cart",component:ce}),a.a.createElement(A.b,{path:"/contact-details",exact:!0,component:pe}),a.a.createElement(A.b,{path:"/checkout",component:ke}),a.a.createElement(A.b,{component:Ce})))}),ze={key:"root",storage:p.a},xe=Object(f.a)(ze,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_EXCHANGE_RATE":var r=t.payload,n=E({},e.order),a=y(r),o=0;n.pizzas.map((function(t){var n=b(t.price,r,e.exchangeRateCoefficient);return t.displayedPrice=n,o+=n*t.counter,t}));var i=b(e.deliveryCost,r,e.exchangeRateCoefficient);return E(E({},e),{},{order:n,exchangeRate:r,sign:a,displayedDeliveryCost:i,orderSum:o});case"FETCH_EXCHANGE_RATE_COEFFICIENT_AND_DELIVERY":var c=t.payload.coefficient,u=t.payload.deliveryCost,l=b(u,e.exchangeRate,c);return E(E({},e),{},{exchangeRateCoefficient:c,displayedDeliveryCost:l});case"ADD_PIZZA_TO_CART":var s=b(t.payload.price,e.exchangeRate,e.exchangeRateCoefficient),f=E(E({},t.payload),{},{displayedPrice:s}),m=v(e.order.pizzas);m.push(f);var d=e.orderSum+s,p=E(E({},e.order),{},{pizzas:m});return E(E({},e),{},{order:p,orderSum:d});case"CHANGE_PIZZA_QUANTITY":var h=v(e.order.pizzas),g=0;h=h.map((function(e){return e.title===t.payload.title?(e.counter=t.payload.value,g+=e.displayedPrice*t.payload.value):g+=e.displayedPrice*e.counter,e}));var _=E(E({},e.order),{},{pizzas:h});return E(E({},e),{},{order:_,orderSum:g});case"REMOVE_PIZZA_FROM_CART":var S=v(e.order.pizzas),A=0;S=S.filter((function(e){if(e.title!==t.payload)return 1;A+=e.displayedPrice*e.counter}));var j=E(E({},e.order),{},{pizzas:S});return E(E({},e),{},{order:j,orderSum:A});case"CLEAR_CART":var w=E({},e.order);for(var N in w)w[N]=[];return E(E({},e),{},{order:w,orderSum:0});case"CHANGE_INPUT_VALUE":var k=t.payload.name,C=t.payload.value,I=E({},e);return Object.keys(I).forEach((function(e){e===k&&(I[e]=C)})),E({},I);case"INSERT_ORDER":var z=E({},e.order);for(var x in z)z[x]=[];return E(E({},e),{},{order:z,orderSum:0,address:"",phoneNumber:"",orderWasSent:!0});case"HAS_AUTHORISED":var R=t.payload;return E(E({},e),{},{userId:R,isAuthorized:!0});case"LOG_OUT":return E(E({},e),{},{userId:"",isAuthorized:!1});case"READY_FOR_NEW_ORDER":return E(E({},e),{},{orderWasSent:!1})}return e})),Re=Object(l.createStore)(xe,Object(S.composeWithDevTools)(Object(l.applyMiddleware)(s.a))),Te=Object(f.b)(Re);i.a.render(a.a.createElement(u.a,null,a.a.createElement(c.a,{store:Re},a.a.createElement(m.a,{loading:null,persistor:Te},a.a.createElement(Ie,null)))),document.getElementById("app"))}});
